!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global="undefined"!=typeof globalThis?globalThis:global||self).jsVectorMap=factory()}(this,(function(){"use strict";var isMergeableObject=function isMergeableObject(value){return function isNonNullObject(value){return!!value&&"object"==typeof value}(value)&&!function isSpecial(value){var stringValue=Object.prototype.toString.call(value);return"[object RegExp]"===stringValue||"[object Date]"===stringValue||function isNode(value){return value instanceof Node}(value)||function isReactElement(value){return value.$$typeof===REACT_ELEMENT_TYPE}(value)}(value)};var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(value,options){return!1!==options.clone&&options.isMergeableObject(value)?deepmerge(function emptyTarget(val){return Array.isArray(val)?[]:{}}(value),value,options):value}function defaultArrayMerge(target,source,options){return target.concat(source).map((function(element){return cloneUnlessOtherwiseSpecified(element,options)}))}function getKeys(target){return Object.keys(target).concat(function getEnumerableOwnPropertySymbols(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter((function(symbol){return target.propertyIsEnumerable(symbol)})):[]}(target))}function propertyIsOnObject(object,property){try{return property in object}catch(_){return!1}}function mergeObject(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys(target).forEach((function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)})),getKeys(source).forEach((function(key){(function propertyIsUnsafe(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))})(target,key)||(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])?destination[key]=function getMergeFunction(key,options){if(!options.customMerge)return deepmerge;var customMerge=options.customMerge(key);return"function"==typeof customMerge?customMerge:deepmerge}(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified(source[key],options))})),destination}var deepmerge=function deepmerge(target,source,options){(options=options||{}).arrayMerge=options.arrayMerge||defaultArrayMerge,options.isMergeableObject=options.isMergeableObject||isMergeableObject,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source);return sourceIsArray===Array.isArray(target)?sourceIsArray?options.arrayMerge(target,source,options):mergeObject(target,source,options):cloneUnlessOtherwiseSpecified(source,options)},getElement=function getElement(selector){return"object"==typeof selector&&void 0!==selector.nodeType?selector:"string"==typeof selector?document.querySelector(selector):null},createElement=function createElement(type,classes,content,html){void 0===html&&(html=!1);var el=document.createElement(type);return content&&(el[html?"innerHTML":"textContent"]=content),classes&&(el.className=classes),el},removeElement=function removeElement(target){target.parentNode.removeChild(target)},isImageUrl=function isImageUrl(url){return/\.(jpg|gif|png)$/.test(url)},merge=function merge(target,source,deep){return void 0===deep&&(deep=!1),deep?deepmerge(target,source):Object.assign(target,source)},getLineUid=function getLineUid(from,to){return from.toLowerCase()+":to:"+to.toLowerCase()},inherit=function inherit(target,source){Object.assign(target.prototype,source)},eventRegistry={},eventUid=1,EventHandler={on:function on(element,event,handler,options){void 0===options&&(options={});var uid="jvm:"+event+"::"+eventUid++;eventRegistry[uid]={selector:element,handler:handler},handler._uid=uid,element.addEventListener(event,handler,options)},delegate:function delegate(element,event,selector,handler){(event=event.split(" ")).forEach((function(eventName){EventHandler.on(element,eventName,(function(e){var target=e.target;target.matches(selector)&&handler.call(target,e)}))}))},off:function off(element,event,handler){var eventType=event.split(":")[1];element.removeEventListener(eventType,handler),delete eventRegistry[handler._uid]},flush:function flush(){Object.keys(eventRegistry).forEach((function(event){EventHandler.off(eventRegistry[event].selector,event,eventRegistry[event].handler)}))},getEventRegistry:function getEventRegistry(){return eventRegistry}};var Events={onLoaded:"map:loaded",onViewportChange:"viewport:changed",onRegionClick:"region:clicked",onMarkerClick:"marker:clicked",onRegionSelected:"region:selected",onMarkerSelected:"marker:selected",onRegionTooltipShow:"region.tooltip:show",onMarkerTooltipShow:"marker.tooltip:show",onDestroyed:"map:destroyed"},parseEvent=function parseEvent(map,selector,isTooltip){var element=getElement(selector),type=-1===element.getAttribute("class").indexOf("jvm-region")?"marker":"region",isRegion="region"===type,code=isRegion?element.getAttribute("data-code"):element.getAttribute("data-index"),event=isRegion?Events.onRegionSelected:Events.onMarkerSelected;return isTooltip&&(event=isRegion?Events.onRegionTooltipShow:Events.onMarkerTooltipShow),{type:type,code:code,event:event,element:isRegion?map.regions[code].element:map._markers[code].element,tooltipText:isRegion?map._mapData.paths[code].name||"":map._markers[code].config.name||""}};function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createForOfIteratorHelperLoose(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var o=0;return function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function _inheritsLoose(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,_setPrototypeOf(t,o)}function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}var BaseComponent=function(){function BaseComponent(){}return BaseComponent.prototype.dispose=function dispose(){this._tooltip?removeElement(this._tooltip):this.shape.remove();for(var _step,_iterator=_createForOfIteratorHelperLoose(Object.getOwnPropertyNames(this));!(_step=_iterator()).done;){this[_step.value]=null}},BaseComponent}(),Interactable={getLabelText:function getLabelText(key,label){if(label){if("function"==typeof label.render){var params=[];return"marker"===this.constructor.Name&&params.push(this.getConfig()),params.push(key),label.render.apply(this,params)}return key}},getLabelOffsets:function getLabelOffsets(key,label){return"function"==typeof label.offsets?label.offsets(key):Array.isArray(label.offsets)?label.offsets[key]:[0,0]},setStyle:function setStyle(property,value){this.shape.setStyle(property,value)},remove:function remove(){this.shape.remove(),this.label&&this.label.remove()},hover:function hover(state){this._setStatus("isHovered",state)},select:function select(state){this._setStatus("isSelected",state)},_setStatus:function _setStatus(property,state){this.shape[property]=state,this.shape.updateStyle(),this[property]=state,this.label&&(this.label[property]=state,this.label.updateStyle())}},Region=function(_BaseComponent){function Region(_ref){var _this,map=_ref.map,code=_ref.code,path=_ref.path,style=_ref.style,label=_ref.label,labelStyle=_ref.labelStyle,labelsGroup=_ref.labelsGroup;(_this=_BaseComponent.call(this)||this)._map=map,_this.shape=_this._createRegion(path,code,style);var text=_this.getLabelText(code,label);if(label&&text){var bbox=_this.shape.getBBox(),offsets=_this.getLabelOffsets(code,label);_this.labelX=bbox.x+bbox.width/2+offsets[0],_this.labelY=bbox.y+bbox.height/2+offsets[1],_this.label=_this._map.canvas.createText({text:text,textAnchor:"middle",alignmentBaseline:"central",dataCode:code,x:_this.labelX,y:_this.labelY},labelStyle,labelsGroup),_this.label.addClass("jvm-region jvm-element")}return _this}_inheritsLoose(Region,_BaseComponent);var _proto=Region.prototype;return _proto._createRegion=function _createRegion(path,code,style){return(path=this._map.canvas.createPath({d:path,dataCode:code},style)).addClass("jvm-region jvm-element"),path},_proto.updateLabelPosition=function updateLabelPosition(){this.label&&this.label.set({x:this.labelX*this._map.scale+this._map.transX*this._map.scale,y:this.labelY*this._map.scale+this._map.transY*this._map.scale})},Region}(BaseComponent);inherit(Region,Interactable);var Line=function(_BaseComponent){function Line(options,style){var _this;return(_this=_BaseComponent.call(this)||this)._options=options,_this._style={initial:style},_this._draw(),_this}_inheritsLoose(Line,_BaseComponent);var _proto=Line.prototype;return _proto.setStyle=function setStyle(property,value){this.shape.setStyle(property,value)},_proto.getConfig=function getConfig(){return this._options.config},_proto._draw=function _draw(){var _this$_options=this._options,index=_this$_options.index,group=_this$_options.group,map=_this$_options.map,config={d:this._getDAttribute(),fill:"none",dataIndex:index};this.shape=map.canvas.createPath(config,this._style,group),this.shape.addClass("jvm-line")},_proto._getDAttribute=function _getDAttribute(){var _this$_options2=this._options,x1=_this$_options2.x1,y1=_this$_options2.y1,x2=_this$_options2.x2,y2=_this$_options2.y2,curvature=_this$_options2.curvature;return"M"+x1+","+y1+this._getQCommand(x1,y1,x2,y2,curvature)+x2+","+y2},_proto._getQCommand=function _getQCommand(x1,y1,x2,y2,curvature){return curvature?" Q"+((x1+x2)/2+curvature*(y2-y1))+","+((y1+y2)/2-curvature*(x2-x1))+" ":" "},Line}(BaseComponent),_excluded=["curvature"],_excluded2=["curvature"];var Marker=function(_BaseComponent){function Marker(options,style){var _this;return(_this=_BaseComponent.call(this)||this)._options=options,_this._style=style,_this._labelX=null,_this._labelY=null,_this._offsets=null,_this._isImage=!!style.initial.image,_this._draw(),_this._options.label&&_this._drawLabel(),_this._isImage&&_this.updateLabelPosition(),_this}_inheritsLoose(Marker,_BaseComponent);var _proto=Marker.prototype;return _proto.getConfig=function getConfig(){return this._options.config},_proto.updateLabelPosition=function updateLabelPosition(){var map=this._options.map;this.label&&this.label.set({x:this._labelX*map.scale+this._offsets[0]+map.transX*map.scale+5+(this._isImage?(this.shape.width||0)/2:this.shape.node.r.baseVal.value),y:this._labelY*map.scale+map.transY*this._options.map.scale+this._offsets[1]})},_proto._draw=function _draw(){var _this$_options=this._options,index=_this$_options.index,map=_this$_options.map,group=_this$_options.group,cx=_this$_options.cx,cy=_this$_options.cy,shapeType=this._isImage?"createImage":"createCircle";this.shape=map.canvas[shapeType]({dataIndex:index,cx:cx,cy:cy},this._style,group),this.shape.addClass("jvm-element jvm-marker")},_proto._drawLabel=function _drawLabel(){var _this$_options2=this._options,index=_this$_options2.index,map=_this$_options2.map,label=_this$_options2.label,labelsGroup=_this$_options2.labelsGroup,cx=_this$_options2.cx,cy=_this$_options2.cy,config=_this$_options2.config,isRecentlyCreated=_this$_options2.isRecentlyCreated,labelText=this.getLabelText(index,label);this._labelX=cx/map.scale-map.transX,this._labelY=cy/map.scale-map.transY,this._offsets=isRecentlyCreated&&config.offsets?config.offsets:this.getLabelOffsets(index,label),this.label=map.canvas.createText({text:labelText,dataIndex:index,x:this._labelX,y:this._labelY,dy:"0.6ex"},map.params.markerLabelStyle,labelsGroup),this.label.addClass("jvm-element jvm-label"),isRecentlyCreated&&this.updateLabelPosition()},function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(Marker,null,[{key:"Name",get:function get(){return"marker"}}])}(BaseComponent);inherit(Marker,Interactable);var Legend=function(){function Legend(options){void 0===options&&(options={}),this._options=options,this._map=this._options.map,this._series=this._options.series,this._body=createElement("div","jvm-legend"),this._options.cssClass&&this._body.setAttribute("class",this._options.cssClass),options.vertical?this._map.legendVertical.appendChild(this._body):this._map.legendHorizontal.appendChild(this._body),this.render()}return Legend.prototype.render=function render(){var ticks=this._series.scale.getTicks();if(this._body.innderHTML="",this._options.title){var legendTitle=createElement("div","jvm-legend-title",this._options.title);this._body.appendChild(legendTitle)}for(var i=0;i<ticks.length;i++){var tick=createElement("div","jvm-legend-tick"),sample=createElement("div","jvm-legend-tick-sample");switch(this._series.config.attribute){case"fill":isImageUrl(ticks[i].value)?sample.style.background="url("+ticks[i].value+")":sample.style.background=ticks[i].value;break;case"stroke":sample.style.background=ticks[i].value;break;case"image":sample.style.background="url("+("object"==typeof ticks[i].value?ticks[i].value.url:ticks[i].value)+") no-repeat center center",sample.style.backgroundSize="cover";break}tick.appendChild(sample);var label=ticks[i].label;this._options.labelRender&&(label=this._options.labelRender(label));var tickText=createElement("div","jvm-legend-tick-text",label);tick.appendChild(tickText),this._body.appendChild(tick)}},Legend}(),OrdinalScale=function(){function OrdinalScale(scale){this._scale=scale}var _proto=OrdinalScale.prototype;return _proto.getValue=function getValue(value){return this._scale[value]},_proto.getTicks=function getTicks(){var ticks=[];for(var key in this._scale)ticks.push({label:key,value:this._scale[key]});return ticks},OrdinalScale}(),NumericScale=function(){function NumericScale(scale,values){this._scale=scale,this._fromColor=this.hexToRgb(scale[0]),this._toColor=this.hexToRgb(scale[1]),this.setMinMaxValues(values)}var _proto=NumericScale.prototype;return _proto.setMinMaxValues=function setMinMaxValues(values){for(var key in this.min=Number.MAX_VALUE,this.max=0,values){var value=parseFloat(values[key]);isNaN(value)||(value>this.max&&(this.max=value),value<this.min&&(this.min=value))}},_proto.getValue=function getValue(value){var numValue=parseFloat(value);if(!isNaN(numValue)){if(this.min===this.max)return this.rgbToHex(this._toColor);for(var hex,color="#",i=0;i<3;i++)color+=(1===(hex=Math.round(this._fromColor[i]+(this._toColor[i]-this._fromColor[i])*((numValue-this.min)/(this.max-this.min))).toString(16)).length?"0":"")+hex;return color}},_proto.hexToRgb=function hexToRgb(h){var r=0,g=0,b=0;return 4==h.length?(r="0x"+h[1]+h[1],g="0x"+h[2]+h[2],b="0x"+h[3]+h[3]):7==h.length&&(r="0x"+h[1]+h[2],g="0x"+h[3]+h[4],b="0x"+h[5]+h[6]),[parseInt(r),parseInt(g),parseInt(b)]},_proto.rgbToHex=function rgbToHex(rgb){for(var color="#",i=0;i<3;i++){var hex=rgb[i].toString(16);color+=(1===hex.length?"0":"")+hex}return color},_proto.getTicks=function getTicks(){return[]},NumericScale}(),Series=function(){function Series(config,elements,map){void 0===config&&(config={}),this._map=map,this._elements=elements,this._values=config.values||{},this.config=config,this.config.attribute=config.attribute||"fill",config.attributes&&this.setAttributes(config.attributes),Array.isArray(config.scale)?this.scale=new NumericScale(config.scale,config.values):"object"==typeof config.scale&&(this.scale=new OrdinalScale(config.scale)),this.config.legend&&(this.legend=new Legend(merge({map:this._map,series:this},this.config.legend))),this.setValues(this._values)}var _proto=Series.prototype;return _proto.setValues=function setValues(values){var attrs={};for(var key in this.scale&&this.scale.setMinMaxValues&&this.scale.setMinMaxValues(values),values)if(void 0!==values[key]&&null!==values[key]){var color=this.scale.getValue(values[key]);void 0!==color&&(attrs[key]=color)}this.setAttributes(attrs)},_proto.setAttributes=function setAttributes(attrs){for(var code in attrs)this._elements[code]&&this._elements[code].element.setStyle(this.config.attribute,attrs[code])},_proto.clear=function clear(){var key,attrs={};for(key in this._values)this._elements[key]&&(attrs[key]=this._elements[key].element.shape.style.initial[this.config.attribute]);this.setAttributes(attrs),this._values={}},Series}();var Proj={mill:function mill(lat,lng,c){return{x:this.radius*(lng-c)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+.4*lat)*this.radDeg))/.8}},merc:function merc(lat,lng,c){return{x:this.radius*(lng-c)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+lat*Math.PI/360))}},aea:function aea(lat,lng,c){var lambda0=c*this.radDeg,fi1=29.5*this.radDeg,fi2=45.5*this.radDeg,fi=lat*this.radDeg,lambda=lng*this.radDeg,n=(Math.sin(fi1)+Math.sin(fi2))/2,C=Math.cos(fi1)*Math.cos(fi1)+2*n*Math.sin(fi1),theta=n*(lambda-lambda0),ro=Math.sqrt(C-2*n*Math.sin(fi))/n,ro0=Math.sqrt(C-2*n*Math.sin(0))/n;return{x:ro*Math.sin(theta)*this.radius,y:-(ro0-ro*Math.cos(theta))*this.radius}},lcc:function lcc(lat,lng,c){var lambda0=c*this.radDeg,lambda=lng*this.radDeg,fi1=33*this.radDeg,fi2=45*this.radDeg,fi=lat*this.radDeg,n=Math.log(Math.cos(fi1)*(1/Math.cos(fi2)))/Math.log(Math.tan(Math.PI/4+fi2/2)*(1/Math.tan(Math.PI/4+fi1/2))),F=Math.cos(fi1)*Math.pow(Math.tan(Math.PI/4+fi1/2),n)/n,ro=F*Math.pow(1/Math.tan(Math.PI/4+fi/2),n),ro0=F*Math.pow(1/Math.tan(Math.PI/4+0),n);return{x:ro*Math.sin(n*(lambda-lambda0))*this.radius,y:-(ro0-ro*Math.cos(n*(lambda-lambda0)))*this.radius}}};Proj.degRad=180/Math.PI,Proj.radDeg=Math.PI/180,Proj.radius=6381372;var core={_setupContainerEvents:function setupContainerEvents(){var oldPageX,oldPageY,_this=this,map=this,mouseDown=!1;this.params.draggable&&(EventHandler.on(this.container,"mousemove",(function(e){if(!mouseDown)return!1;map.transX-=(oldPageX-e.pageX)/map.scale,map.transY-=(oldPageY-e.pageY)/map.scale,map._applyTransform(),oldPageX=e.pageX,oldPageY=e.pageY})),EventHandler.on(this.container,"mousedown",(function(e){return mouseDown=!0,oldPageX=e.pageX,oldPageY=e.pageY,!1})),EventHandler.on(document.body,"mouseup",(function(){mouseDown=!1}))),this.params.zoomOnScroll&&EventHandler.on(this.container,"wheel",(function(event){var deltaY=75*((event.deltaY||-event.wheelDelta||event.detail)>>10||1),rect=_this.container.getBoundingClientRect(),offsetX=event.pageX-rect.left-window.scrollX,offsetY=event.pageY-rect.top-window.scrollY,zoomStep=Math.pow(1+map.params.zoomOnScrollSpeed/1e3,-1.5*deltaY);map.tooltip&&map._tooltip.hide(),map._setScale(map.scale*zoomStep,offsetX,offsetY),event.preventDefault()}))},_setupElementEvents:function setupElementEvents(){var pageX,pageY,mouseMoved,map=this,container=this.container;EventHandler.on(container,"mousemove",(function(event){Math.abs(pageX-event.pageX)+Math.abs(pageY-event.pageY)>2&&(mouseMoved=!0)})),EventHandler.delegate(container,"mousedown",".jvm-element",(function(event){pageX=event.pageX,pageY=event.pageY,mouseMoved=!1})),EventHandler.delegate(container,"mouseover mouseout",".jvm-element",(function(event){var data=parseEvent(map,this,!0),showTooltip=map.params.showTooltip;"mouseover"===event.type?(data.element.hover(!0),showTooltip&&(map._tooltip.text(data.tooltipText),map._emit(data.event,[event,map._tooltip,data.code]),event.defaultPrevented||map._tooltip.show())):(data.element.hover(!1),showTooltip&&map._tooltip.hide())})),EventHandler.delegate(container,"mouseup",".jvm-element",(function(event){var data=parseEvent(map,this);if(!mouseMoved&&("region"===data.type&&map.params.regionsSelectable||"marker"===data.type&&map.params.markersSelectable)){var element=data.element;map.params[data.type+"sSelectableOne"]&&("region"===data.type?map.clearSelectedRegions():map.clearSelectedMarkers()),data.element.isSelected?element.select(!1):element.select(!0),map._emit(data.event,[data.code,element.isSelected,"region"===data.type?map.getSelectedRegions():map.getSelectedMarkers()])}})),EventHandler.delegate(container,"click",".jvm-element",(function(event){var _parseEvent=parseEvent(map,this),type=_parseEvent.type,code=_parseEvent.code;map._emit("region"===type?Events.onRegionClick:Events.onMarkerClick,[event,code])}))},_setupZoomButtons:function setupZoomButtons(){var _this=this,zoomInOption=this.params.zoomInButton,zoomOutOption=this.params.zoomOutButton,getZoomButton=function getZoomButton(zoomOption){return"string"==typeof zoomOption?document.querySelector(zoomOption):zoomOption},zoomIn=zoomInOption?getZoomButton(zoomInOption):createElement("div","jvm-zoom-btn jvm-zoomin","&#43;",!0),zoomOut=zoomOutOption?getZoomButton(zoomOutOption):createElement("div","jvm-zoom-btn jvm-zoomout","&#x2212",!0);zoomInOption||this.container.appendChild(zoomIn),zoomOutOption||this.container.appendChild(zoomOut);var handler=function handler(zoomin){return void 0===zoomin&&(zoomin=!0),function(){return _this._setScale(zoomin?_this.scale*_this.params.zoomStep:_this.scale/_this.params.zoomStep,_this._width/2,_this._height/2,!1,_this.params.zoomAnimate)}};EventHandler.on(zoomIn,"click",handler()),EventHandler.on(zoomOut,"click",handler(!1))},_setupContainerTouchEvents:function setupContainerTouchEvents(){var touchStartScale,touchStartDistance,touchX,touchY,centerTouchX,centerTouchY,lastTouchesLength,map=this,handleTouchEvent=function handleTouchEvent(e){var offset,scale,transXOld,transYOld,touches=e.touches;if("touchstart"==e.type&&(lastTouchesLength=0),1==touches.length){var _map$_tooltip;if(1==lastTouchesLength)transXOld=map.transX,transYOld=map.transY,map.transX-=(touchX-touches[0].pageX)/map.scale,map.transY-=(touchY-touches[0].pageY)/map.scale,null==(_map$_tooltip=map._tooltip)||_map$_tooltip.hide(),map._applyTransform(),transXOld==map.transX&&transYOld==map.transY||e.preventDefault();touchX=touches[0].pageX,touchY=touches[0].pageY}else if(2==touches.length)if(2==lastTouchesLength){var _map$_tooltip2;scale=Math.sqrt(Math.pow(touches[0].pageX-touches[1].pageX,2)+Math.pow(touches[0].pageY-touches[1].pageY,2))/touchStartDistance,map._setScale(touchStartScale*scale,centerTouchX,centerTouchY),null==(_map$_tooltip2=map._tooltip)||_map$_tooltip2.hide(),e.preventDefault()}else{var rect=map.container.getBoundingClientRect();offset={top:rect.top+window.scrollY,left:rect.left+window.scrollX},centerTouchX=touches[0].pageX>touches[1].pageX?touches[1].pageX+(touches[0].pageX-touches[1].pageX)/2:touches[0].pageX+(touches[1].pageX-touches[0].pageX)/2,centerTouchY=touches[0].pageY>touches[1].pageY?touches[1].pageY+(touches[0].pageY-touches[1].pageY)/2:touches[0].pageY+(touches[1].pageY-touches[0].pageY)/2,centerTouchX-=offset.left,centerTouchY-=offset.top,touchStartScale=map.scale,touchStartDistance=Math.sqrt(Math.pow(touches[0].pageX-touches[1].pageX,2)+Math.pow(touches[0].pageY-touches[1].pageY,2))}lastTouchesLength=touches.length};EventHandler.on(map.container,"touchstart",handleTouchEvent),EventHandler.on(map.container,"touchmove",handleTouchEvent)},_createRegions:function createRegions(){for(var code in this._regionLabelsGroup=this._regionLabelsGroup||this.canvas.createGroup("jvm-regions-labels-group"),this._mapData.paths){var region=new Region({map:this,code:code,path:this._mapData.paths[code].path,style:merge({},this.params.regionStyle),labelStyle:this.params.regionLabelStyle,labelsGroup:this._regionLabelsGroup,label:this.params.labels&&this.params.labels.regions});this.regions[code]={config:this._mapData.paths[code],element:region}}},_createLines:function createLines(lines){var point1=!1,point2=!1,_this$params$lineStyl=this.params.lineStyle,curvature=_this$params$lineStyl.curvature,lineStyle=_objectWithoutPropertiesLoose(_this$params$lineStyl,_excluded);for(var index in lines){for(var lineConfig=lines[index],_i=0,_Object$values=Object.values(this._markers);_i<_Object$values.length;_i++){var markerConfig=_Object$values[_i].config;markerConfig.name===lineConfig.from&&(point1=this.getMarkerPosition(markerConfig)),markerConfig.name===lineConfig.to&&(point2=this.getMarkerPosition(markerConfig))}if(!1!==point1&&!1!==point2){var _ref=lineConfig.style||{},curvatureOption=_ref.curvature,style=_objectWithoutPropertiesLoose(_ref,_excluded2);this._lines[getLineUid(lineConfig.from,lineConfig.to)]=new Line({index:index,map:this,group:this._linesGroup,config:lineConfig,x1:point1.x,y1:point1.y,x2:point2.x,y2:point2.y,curvature:0==curvatureOption?0:curvatureOption||curvature},merge(lineStyle,style,!0))}}},_createMarkers:function createMarkers(markers,isRecentlyCreated){var _this=this;void 0===markers&&(markers={}),void 0===isRecentlyCreated&&(isRecentlyCreated=!1);var _loop=function _loop(){var config=markers[index],point=_this.getMarkerPosition(config),uid=config.coords.join(":");if(!point)return 0;if(isRecentlyCreated){if(Object.keys(_this._markers).filter((function(i){return _this._markers[i]._uid===uid})).length)return 0;index=Object.keys(_this._markers).length}var marker=new Marker({index:index,map:_this,label:_this.params.labels&&_this.params.labels.markers,labelsGroup:_this._markerLabelsGroup,cx:point.x,cy:point.y,group:_this._markersGroup,config:config,isRecentlyCreated:isRecentlyCreated},merge(_this.params.markerStyle,_extends({},config.style||{}),!0));_this._markers[index]&&_this.removeMarkers([index]),_this._markers[index]={_uid:uid,config:config,element:marker}};for(var index in markers)_loop()},_createSeries:function createSeries(){for(var key in this.series={markers:[],regions:[]},this.params.series)for(var i=0;i<this.params.series[key].length;i++)this.series[key][i]=new Series(this.params.series[key][i],"markers"===key?this._markers:this.regions,this)},_applyTransform:function applyTransform(){var maxTransX,maxTransY,minTransX,minTransY;this._defaultWidth*this.scale<=this._width?(maxTransX=(this._width-this._defaultWidth*this.scale)/(2*this.scale),minTransX=(this._width-this._defaultWidth*this.scale)/(2*this.scale)):(maxTransX=0,minTransX=(this._width-this._defaultWidth*this.scale)/this.scale),this._defaultHeight*this.scale<=this._height?(maxTransY=(this._height-this._defaultHeight*this.scale)/(2*this.scale),minTransY=(this._height-this._defaultHeight*this.scale)/(2*this.scale)):(maxTransY=0,minTransY=(this._height-this._defaultHeight*this.scale)/this.scale),this.transY>maxTransY?this.transY=maxTransY:this.transY<minTransY&&(this.transY=minTransY),this.transX>maxTransX?this.transX=maxTransX:this.transX<minTransX&&(this.transX=minTransX),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this._markers&&this._repositionMarkers(),this._lines&&this._repositionLines(),this._repositionLabels()},_resize:function resize(){var curBaseScale=this._baseScale;this._width/this._height>this._defaultWidth/this._defaultHeight?(this._baseScale=this._height/this._defaultHeight,this._baseTransX=Math.abs(this._width-this._defaultWidth*this._baseScale)/(2*this._baseScale)):(this._baseScale=this._width/this._defaultWidth,this._baseTransY=Math.abs(this._height-this._defaultHeight*this._baseScale)/(2*this._baseScale)),this.scale*=this._baseScale/curBaseScale,this.transX*=this._baseScale/curBaseScale,this.transY*=this._baseScale/curBaseScale},_setScale:function setScale(scale,anchorX,anchorY,isCentered,animate){var zoomStep,interval,scaleStart,scaleDiff,transXStart,transXDiff,transYStart,transYDiff,transX,transY,_this=this,i=0,count=Math.abs(Math.round(60*(scale-this.scale)/Math.max(scale,this.scale)));scale>this.params.zoomMax*this._baseScale?scale=this.params.zoomMax*this._baseScale:scale<this.params.zoomMin*this._baseScale&&(scale=this.params.zoomMin*this._baseScale),void 0!==anchorX&&void 0!==anchorY&&(zoomStep=scale/this.scale,isCentered?(transX=anchorX+this._defaultWidth*(this._width/(this._defaultWidth*scale))/2,transY=anchorY+this._defaultHeight*(this._height/(this._defaultHeight*scale))/2):(transX=this.transX-(zoomStep-1)/scale*anchorX,transY=this.transY-(zoomStep-1)/scale*anchorY)),animate&&count>0?(scaleStart=this.scale,scaleDiff=(scale-scaleStart)/count,transXStart=this.transX*this.scale,transYStart=this.transY*this.scale,transXDiff=(transX*scale-transXStart)/count,transYDiff=(transY*scale-transYStart)/count,interval=setInterval((function(){i+=1,_this.scale=scaleStart+scaleDiff*i,_this.transX=(transXStart+transXDiff*i)/_this.scale,_this.transY=(transYStart+transYDiff*i)/_this.scale,_this._applyTransform(),i==count&&(clearInterval(interval),_this._emit(Events.onViewportChange,[_this.scale,_this.transX,_this.transY]))}),10)):(this.transX=transX,this.transY=transY,this.scale=scale,this._applyTransform(),this._emit(Events.onViewportChange,[this.scale,this.transX,this.transY]))},setFocus:function setFocus(config){var _this=this;void 0===config&&(config={});var bbox,codes=[];if(config.region?codes.push(config.region):config.regions&&(codes=config.regions),codes.length)return codes.forEach((function(code){if(_this.regions[code]){var itemBbox=_this.regions[code].element.shape.getBBox();itemBbox&&(bbox=void 0===bbox?itemBbox:{x:Math.min(bbox.x,itemBbox.x),y:Math.min(bbox.y,itemBbox.y),width:Math.max(bbox.x+bbox.width,itemBbox.x+itemBbox.width)-Math.min(bbox.x,itemBbox.x),height:Math.max(bbox.y+bbox.height,itemBbox.y+itemBbox.height)-Math.min(bbox.y,itemBbox.y)})}})),this._setScale(Math.min(this._width/bbox.width,this._height/bbox.height),-(bbox.x+bbox.width/2),-(bbox.y+bbox.height/2),!0,config.animate);if(config.coords){var point=this.coordsToPoint(config.coords[0],config.coords[1]),x=this.transX-point.x/this.scale,y=this.transY-point.y/this.scale;return this._setScale(config.scale*this._baseScale,x,y,!0,config.animate)}},updateSize:function updateSize(){this._width=this.container.offsetWidth,this._height=this.container.offsetHeight,this._resize(),this.canvas.setSize(this._width,this._height),this._applyTransform()},coordsToPoint:function coordsToPoint(lat,lng){var projection=Map.maps[this.params.map].projection,_Proj$projection$type=Proj[projection.type](lat,lng,projection.centralMeridian),x=_Proj$projection$type.x,y=_Proj$projection$type.y,inset=this.getInsetForPoint(x,y);if(!inset)return!1;var bbox=inset.bbox;return x=(x-bbox[0].x)/(bbox[1].x-bbox[0].x)*inset.width*this.scale,y=(y-bbox[0].y)/(bbox[1].y-bbox[0].y)*inset.height*this.scale,{x:x+this.transX*this.scale+inset.left*this.scale,y:y+this.transY*this.scale+inset.top*this.scale}},getInsetForPoint:function getInsetForPoint(x,y){for(var insets=Map.maps[this.params.map].insets,index=0;index<insets.length;index++){var _insets$index$bbox=insets[index].bbox,start=_insets$index$bbox[0],end=_insets$index$bbox[1];if(x>start.x&&x<end.x&&y>start.y&&y<end.y)return insets[index]}},getMarkerPosition:function getMarkerPosition(_ref){var coords=_ref.coords;return Map.maps[this.params.map].projection?this.coordsToPoint.apply(this,coords):{x:coords[0]*this.scale+this.transX*this.scale,y:coords[1]*this.scale+this.transY*this.scale}},_repositionLines:function repositionLines(){var _this=this,curvature=this.params.lineStyle.curvature;Object.values(this._lines).forEach((function(line){var startMarker=Object.values(_this._markers).find((function(_ref){return _ref.config.name===line.getConfig().from})),endMarker=Object.values(_this._markers).find((function(_ref2){return _ref2.config.name===line.getConfig().to}));if(startMarker&&endMarker){var _this$getMarkerPositi=_this.getMarkerPosition(startMarker.config),x1=_this$getMarkerPositi.x,y1=_this$getMarkerPositi.y,_this$getMarkerPositi2=_this.getMarkerPosition(endMarker.config),x2=_this$getMarkerPositi2.x,y2=_this$getMarkerPositi2.y,curvatureOption=0==line._options.curvature?0:line._options.curvature||curvature,curveX=(x1+x2)/2+curvatureOption*(y2-y1),curveY=(y1+y2)/2-curvatureOption*(x2-x1);line.setStyle({d:"M"+x1+","+y1+" Q"+curveX+","+curveY+" "+x2+","+y2})}}))},_repositionMarkers:function repositionMarkers(){for(var index in this._markers){var point=this.getMarkerPosition(this._markers[index].config);!1!==point&&this._markers[index].element.setStyle({cx:point.x,cy:point.y})}},_repositionLabels:function repositionLabels(){var labels=this.params.labels;if(labels){if(labels.regions)for(var key in this.regions)this.regions[key].element.updateLabelPosition();if(labels.markers)for(var _key in this._markers)this._markers[_key].element.updateLabelPosition()}}},SVGElement=function(){function SVGElement(name,config){this.node=this._createElement(name),config&&this.set(config)}var _proto=SVGElement.prototype;return _proto._createElement=function _createElement(tagName){return document.createElementNS("http://www.w3.org/2000/svg",tagName)},_proto.addClass=function addClass(className){this.node.setAttribute("class",className)},_proto.getBBox=function getBBox(){return this.node.getBBox()},_proto.set=function set(property,value){if("object"==typeof property)for(var attr in property)this.applyAttr(attr,property[attr]);else this.applyAttr(property,value)},_proto.get=function get(property){return this.style.initial[property]},_proto.applyAttr=function applyAttr(property,value){this.node.setAttribute(function hyphenate(string){return string.replace(/[\w]([A-Z])/g,(function(m){return m[0]+"-"+m[1]})).toLowerCase()}(property),value)},_proto.remove=function remove(){removeElement(this.node)},SVGElement}(),SVGShapeElement=function(_SVGElement){function SVGShapeElement(name,config,style){var _this;return void 0===style&&(style={}),(_this=_SVGElement.call(this,name,config)||this).isHovered=!1,_this.isSelected=!1,_this.style=style,_this.style.current={},_this.updateStyle(),_this}_inheritsLoose(SVGShapeElement,_SVGElement);var _proto=SVGShapeElement.prototype;return _proto.setStyle=function setStyle(property,value){var _merge;"object"==typeof property?merge(this.style.current,property):merge(this.style.current,((_merge={})[property]=value,_merge));this.updateStyle()},_proto.updateStyle=function updateStyle(){var attrs={};merge(attrs,this.style.initial),merge(attrs,this.style.current),this.isHovered&&merge(attrs,this.style.hover),this.isSelected&&(merge(attrs,this.style.selected),this.isHovered&&merge(attrs,this.style.selectedHover)),this.set(attrs)},SVGShapeElement}(SVGElement),SVGTextElement=function(_SVGShapeElement){function SVGTextElement(config,style){return _SVGShapeElement.call(this,"text",config,style)||this}return _inheritsLoose(SVGTextElement,_SVGShapeElement),SVGTextElement.prototype.applyAttr=function applyAttr(attr,value){"text"===attr?this.node.textContent=value:_SVGShapeElement.prototype.applyAttr.call(this,attr,value)},SVGTextElement}(SVGShapeElement),SVGImageElement=function(_SVGShapeElement){function SVGImageElement(config,style){return _SVGShapeElement.call(this,"image",config,style)||this}return _inheritsLoose(SVGImageElement,_SVGShapeElement),SVGImageElement.prototype.applyAttr=function applyAttr(attr,value){var imageUrl;"image"===attr?("object"==typeof value?(imageUrl=value.url,this.offset=value.offset||[0,0]):(imageUrl=value,this.offset=[0,0]),this.node.setAttributeNS("http://www.w3.org/1999/xlink","href",imageUrl),this.width=23,this.height=23,this.applyAttr("width",this.width),this.applyAttr("height",this.height),this.applyAttr("x",this.cx-this.width/2+this.offset[0]),this.applyAttr("y",this.cy-this.height/2+this.offset[1])):"cx"==attr?(this.cx=value,this.width&&this.applyAttr("x",value-this.width/2+this.offset[0])):"cy"==attr?(this.cy=value,this.height&&this.applyAttr("y",value-this.height/2+this.offset[1])):_SVGShapeElement.prototype.applyAttr.apply(this,arguments)},SVGImageElement}(SVGShapeElement),SVGCanvasElement=function(_SVGElement){function SVGCanvasElement(container){var _this;return(_this=_SVGElement.call(this,"svg")||this)._container=container,_this._defsElement=new SVGElement("defs"),_this._rootElement=new SVGElement("g",{id:"jvm-regions-group"}),_this.node.appendChild(_this._defsElement.node),_this.node.appendChild(_this._rootElement.node),_this._container.appendChild(_this.node),_this}_inheritsLoose(SVGCanvasElement,_SVGElement);var _proto=SVGCanvasElement.prototype;return _proto.setSize=function setSize(width,height){this.node.setAttribute("width",width),this.node.setAttribute("height",height)},_proto.applyTransformParams=function applyTransformParams(scale,transX,transY){this._rootElement.node.setAttribute("transform","scale("+scale+") translate("+transX+", "+transY+")")},_proto.createPath=function createPath(config,style,group){var path=new SVGShapeElement("path",config,style);return path.node.setAttribute("fill-rule","evenodd"),this._add(path,group)},_proto.createCircle=function createCircle(config,style,group){var circle=new SVGShapeElement("circle",config,style);return this._add(circle,group)},_proto.createLine=function createLine(config,style,group){var line=new SVGShapeElement("line",config,style);return this._add(line,group)},_proto.createText=function createText(config,style,group){var text=new SVGTextElement(config,style);return this._add(text,group)},_proto.createImage=function createImage(config,style,group){var image=new SVGImageElement(config,style);return this._add(image,group)},_proto.createGroup=function createGroup(id){var group=new SVGElement("g");return this.node.appendChild(group.node),id&&(group.node.id=id),group.canvas=this,group},_proto._add=function _add(element,group){return(group=group||this._rootElement).node.appendChild(element.node),element},SVGCanvasElement}(SVGElement),Tooltip=function(_BaseComponent){function Tooltip(map){var _this;_this=_BaseComponent.call(this)||this;var tooltip=createElement("div","jvm-tooltip");return _this._map=map,_this._tooltip=document.body.appendChild(tooltip),_this._bindEventListeners(),_this||function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(_this)}_inheritsLoose(Tooltip,_BaseComponent);var _proto=Tooltip.prototype;return _proto._bindEventListeners=function _bindEventListeners(){var _this2=this;EventHandler.on(this._map.container,"mousemove",(function(event){if(_this2._tooltip.classList.contains("active")){var container=function findElement(parentElement,selector){return Element.prototype.querySelector.call(parentElement,selector)}(_this2._map.container,"#jvm-regions-group").getBoundingClientRect(),_this2$_tooltip$getBo=_this2._tooltip.getBoundingClientRect(),height=_this2$_tooltip$getBo.height,width=_this2$_tooltip$getBo.width,topIsPassed=event.clientY<=container.top+height+5,top=event.pageY-height-5,left=event.pageX-width-5;topIsPassed&&(top+=height+5,left-=10),event.clientX<container.left+width+5&&(left=event.pageX+5+2,topIsPassed&&(left+=10)),_this2.css({top:top+"px",left:left+"px"})}}))},_proto.getElement=function getElement(){return this._tooltip},_proto.show=function show(){this._tooltip.classList.add("active")},_proto.hide=function hide(){this._tooltip.classList.remove("active")},_proto.text=function text(string,html){void 0===html&&(html=!1);var property=html?"innerHTML":"textContent";if(!string)return this._tooltip[property];this._tooltip[property]=string},_proto.css=function css(_css){for(var style in _css)this._tooltip.style[style]=_css[style];return this},Tooltip}(BaseComponent),DataVisualization=function(){function DataVisualization(_ref,map){var scale=_ref.scale,values=_ref.values;this._scale=scale,this._values=values,this._fromColor=this.hexToRgb(scale[0]),this._toColor=this.hexToRgb(scale[1]),this._map=map,this.setMinMaxValues(values),this.visualize()}var _proto=DataVisualization.prototype;return _proto.setMinMaxValues=function setMinMaxValues(values){for(var value in this.min=Number.MAX_VALUE,this.max=0,values)(value=parseFloat(values[value]))>this.max&&(this.max=value),value<this.min&&(this.min=value)},_proto.visualize=function visualize(){var value,attrs={};for(var regionCode in this._values)value=parseFloat(this._values[regionCode]),isNaN(value)||(attrs[regionCode]=this.getValue(value));this.setAttributes(attrs)},_proto.setAttributes=function setAttributes(attrs){for(var code in attrs)this._map.regions[code]&&this._map.regions[code].element.setStyle("fill",attrs[code])},_proto.getValue=function getValue(value){if(this.min===this.max)return"#"+this._toColor.join("");for(var hex,color="#",i=0;i<3;i++)color+=(1===(hex=Math.round(this._fromColor[i]+(this._toColor[i]-this._fromColor[i])*((value-this.min)/(this.max-this.min))).toString(16)).length?"0":"")+hex;return color},_proto.hexToRgb=function hexToRgb(h){var r=0,g=0,b=0;return 4==h.length?(r="0x"+h[1]+h[1],g="0x"+h[2]+h[2],b="0x"+h[3]+h[3]):7==h.length&&(r="0x"+h[1]+h[2],g="0x"+h[3]+h[4],b="0x"+h[5]+h[6]),[parseInt(r),parseInt(g),parseInt(b)]},DataVisualization}(),Map=function(){function Map(options){var _this=this;if(void 0===options&&(options={}),this.params=merge(Map.defaults,options,!0),!Map.maps[this.params.map])throw new Error("Attempt to use map which was not loaded: "+options.map);this.regions={},this.scale=1,this.transX=0,this.transY=0,this._mapData=Map.maps[this.params.map],this._markers={},this._lines={},this._defaultWidth=this._mapData.width,this._defaultHeight=this._mapData.height,this._height=0,this._width=0,this._baseScale=1,this._baseTransX=0,this._baseTransY=0,"loading"!==document.readyState?this._init():window.addEventListener("DOMContentLoaded",(function(){return _this._init()}))}var _proto=Map.prototype;return _proto._init=function _init(){var options=this.params;this.container=getElement(options.selector),this.container.classList.add("jvm-container"),this.canvas=new SVGCanvasElement(this.container),this.setBackgroundColor(options.backgroundColor),this._createRegions(),this.updateSize(),options.lines&&(this._linesGroup=this.canvas.createGroup("jvm-lines-group")),options.markers&&(this._markersGroup=this.canvas.createGroup("jvm-markers-group"),this._markerLabelsGroup=this.canvas.createGroup("jvm-markers-labels-group")),this._createMarkers(options.markers),this._createLines(options.lines||{}),this._repositionLabels(),this._setupContainerEvents(),this._setupElementEvents(),options.zoomButtons&&this._setupZoomButtons(),options.showTooltip&&(this._tooltip=new Tooltip(this)),options.selectedRegions&&this._setSelected("regions",options.selectedRegions),options.selectedMarkers&&this._setSelected("_markers",options.selectedMarkers),options.focusOn&&this.setFocus(options.focusOn),options.visualizeData&&(this.dataVisualization=new DataVisualization(options.visualizeData,this)),options.bindTouchEvents&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&this._setupContainerTouchEvents(),options.series&&(this.container.appendChild(this.legendHorizontal=createElement("div","jvm-series-container jvm-series-h")),this.container.appendChild(this.legendVertical=createElement("div","jvm-series-container jvm-series-v")),this._createSeries()),this._emit(Events.onLoaded,[this])},_proto.setBackgroundColor=function setBackgroundColor(color){this.container.style.backgroundColor=color},_proto.getSelectedRegions=function getSelectedRegions(){return this._getSelected("regions")},_proto.clearSelectedRegions=function clearSelectedRegions(regions){var _this2=this;void 0===regions&&(regions=void 0),(regions=this._normalizeRegions(regions)||this._getSelected("regions")).forEach((function(key){_this2.regions[key].element.select(!1)}))},_proto.setSelectedRegions=function setSelectedRegions(regions){this.clearSelectedRegions(),this._setSelected("regions",this._normalizeRegions(regions))},_proto.getSelectedMarkers=function getSelectedMarkers(){return this._getSelected("_markers")},_proto.clearSelectedMarkers=function clearSelectedMarkers(){this._clearSelected("_markers")},_proto.setSelectedMarkers=function setSelectedMarkers(markers){this._setSelected("_markers",markers)},_proto.addMarkers=function addMarkers(config){config=Array.isArray(config)?config:[config],this._createMarkers(config,!0)},_proto.removeMarkers=function removeMarkers(markers){var _this3=this;markers||(markers=Object.keys(this._markers)),markers.forEach((function(index){_this3._markers[index].element.remove(),delete _this3._markers[index]}))},_proto.addLine=function addLine(from,to,style){void 0===style&&(style={}),console.warn("`addLine` method is deprecated, please use `addLines` instead."),this._createLines([{from:from,to:to,style:style}],this._markers,!0)},_proto.addLines=function addLines(config){var uids=this._getLinesAsUids();Array.isArray(config)||(config=[config]),this._createLines(config.filter((function(line){return!(uids.indexOf(getLineUid(line.from,line.to))>-1)})),!0)},_proto.removeLines=function removeLines(lines){var _this4=this;(lines=Array.isArray(lines)?lines.map((function(line){return getLineUid(line.from,line.to)})):this._getLinesAsUids()).forEach((function(uid){_this4._lines[uid].dispose(),delete _this4._lines[uid]}))},_proto.removeLine=function removeLine(from,to){console.warn("`removeLine` method is deprecated, please use `removeLines` instead.");var uid=getLineUid(from,to);this._lines.hasOwnProperty(uid)&&(this._lines[uid].element.remove(),delete this._lines[uid])},_proto.reset=function reset(){for(var key in this.series)for(var i=0;i<this.series[key].length;i++)this.series[key][i].clear();this.legendHorizontal&&(removeElement(this.legendHorizontal),this.legendHorizontal=null),this.legendVertical&&(removeElement(this.legendVertical),this.legendVertical=null),this.scale=this._baseScale,this.transX=this._baseTransX,this.transY=this._baseTransY,this._applyTransform(),this.clearSelectedMarkers(),this.clearSelectedRegions(),this.removeMarkers()},_proto.destroy=function destroy(destroyInstance){var _this5=this;void 0===destroyInstance&&(destroyInstance=!0),EventHandler.flush(),this._tooltip.dispose(),this._emit(Events.onDestroyed),destroyInstance&&Object.keys(this).forEach((function(key){try{delete _this5[key]}catch(e){}}))},_proto.extend=function extend(name,callback){if("function"==typeof this[name])throw new Error("The method ["+name+"] does already exist, please use another name.");Map.prototype[name]=callback},_proto._emit=function _emit(eventName,args){for(var event in Events)Events[event]===eventName&&"function"==typeof this.params[event]&&this.params[event].apply(this,args)},_proto._getSelected=function _getSelected(type){var selected=[];for(var key in this[type])this[type][key].element.isSelected&&selected.push(key);return selected},_proto._setSelected=function _setSelected(type,keys){var _this6=this;keys.forEach((function(key){_this6[type][key]&&_this6[type][key].element.select(!0)}))},_proto._clearSelected=function _clearSelected(type){var _this7=this;this._getSelected(type).forEach((function(key){_this7[type][key].element.select(!1)}))},_proto._getLinesAsUids=function _getLinesAsUids(){return Object.keys(this._lines)},_proto._normalizeRegions=function _normalizeRegions(regions){return"string"==typeof regions?[regions]:regions},Map}();Map.maps={},Map.defaults={map:"world",backgroundColor:"transparent",draggable:!0,zoomButtons:!0,zoomOnScroll:!0,zoomOnScrollSpeed:3,zoomMax:12,zoomMin:1,zoomAnimate:!0,showTooltip:!0,zoomStep:1.5,bindTouchEvents:!0,lineStyle:{curvature:0,stroke:"#808080",strokeWidth:1,strokeLinecap:"round"},markersSelectable:!1,markersSelectableOne:!1,markerStyle:{initial:{r:7,fill:"#374151",fillOpacity:1,stroke:"#FFF",strokeWidth:5,strokeOpacity:.5},hover:{fill:"#3cc0ff",cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{fontFamily:"Verdana",fontSize:12,fontWeight:500,cursor:"default",fill:"#374151"},hover:{cursor:"pointer"},selected:{},selectedHover:{}},regionsSelectable:!1,regionsSelectableOne:!1,regionStyle:{initial:{fill:"#dee2e8",fillOpacity:1,stroke:"none",strokeWidth:0},hover:{fillOpacity:.7,cursor:"pointer"},selected:{fill:"#9ca3af"},selectedHover:{}},regionLabelStyle:{initial:{fontFamily:"Verdana",fontSize:"12",fontWeight:"bold",cursor:"default",fill:"#35373e"},hover:{cursor:"pointer"}}},Object.assign(Map.prototype,core);var jsVectorMap=function(){function jsVectorMap(options){if(void 0===options&&(options={}),!options.selector)throw new Error("Selector is not given.");return new Map(options)}return jsVectorMap.addMap=function addMap(name,map){Map.maps[name]=map},jsVectorMap}();return window.jsVectorMap=jsVectorMap}));