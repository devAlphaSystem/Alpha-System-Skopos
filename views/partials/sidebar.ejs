<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <a href="/" class="sidebar-brand">
      <span class="brand-icon">S</span>
      <span>Skopos</span>
    </a>
    <button class="sidebar-collapse-btn" id="sidebar-collapse-btn" title="Toggle Sidebar">
      <i class="fa-solid fa-angles-left"></i>
    </button>
  </div>
  <nav class="sidebar-nav">
    <p class="nav-header">Menu</p>
    <ul>
      <li class="<%= (currentPage === 'overview') ? 'active' : '' %>">
        <a href="/">
          <i class="fa-solid fa-house icon"></i>
          <span>Overview</span>
        </a>
      </li>
      <% if (typeof isMobile === 'undefined' || !isMobile) { %>
      <li class="<%= (currentPage === 'websites') ? 'active' : '' %>">
        <a href="/websites">
          <i class="fa-solid fa-globe icon"></i>
          <span>Websites</span>
        </a>
      </li>
      <% } %>
      <li class="<%= (currentPage === 'settings') ? 'active' : '' %>">
        <a href="/settings">
          <i class="fa-solid fa-gear icon"></i>
          <span>Settings</span>
        </a>
      </li>
    </ul>
    <% if (websites && websites.length > 0) { %>
      <p class="nav-header">Websites</p>
      <ul>
        <li class="website-selector-item">
          <select id="website-selector" class="website-selector">
            <% if (!currentWebsite) { %>
              <option value="" disabled selected>Select a website...</option>
            <% } %>
            <% for (const website of websites) { %>
              <option value="<%= website.id %>" <%= (currentWebsite && currentWebsite.id === website.id) ? 'selected' : '' %>>
                <%= website.name %>
              </option>
            <% } %>
          </select>
        </li>
        <% if (currentWebsite && !currentWebsite.isArchived) { %>
          <li class="<%= (currentPage === 'dashboard') ? 'active' : '' %>">
            <a href="/dashboard/<%= currentWebsite.id %>">
              <i class="fa-solid fa-chart-line icon"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <% if (typeof isMobile === 'undefined' || !isMobile) { %>
          <li class="<%= (currentPage === 'seo') ? 'active' : '' %>">
            <a href="/dashboard/seo/<%= currentWebsite.id %>">
              <i class="fa-solid fa-magnifying-glass-chart icon"></i>
              <span>Analytics</span>
            </a>
          </li>
          <% } %>
          <li class="<%= (currentPage === 'sessions') ? 'active' : '' %>">
            <a href="/sessions/<%= currentWebsite.id %>">
              <i class="fa-solid fa-clock-rotate-left icon"></i>
              <span>Sessions</span>
            </a>
          </li>
          <% if (typeof isMobile === 'undefined' || !isMobile) { %>
          <li class="<%= (currentPage === 'uptime') ? 'active' : '' %>">
            <a href="/uptime/<%= currentWebsite.id %>">
              <i class="fa-solid fa-signal icon"></i>
              <span>Uptime</span>
            </a>
          </li>
          <% } %>
        <% } %>
      </ul>
    <% } %>
  </nav>
  <div class="sidebar-footer">
    <% if (typeof appVersion !== 'undefined') { %>
      <div class="footer-buttons">
        <a href="https://github.com/devAlphaSystem/Alpha-System-Skopos" target="_blank" rel="noopener noreferrer" class="footer-button github-button" title="View on GitHub">
          <i class="fa-brands fa-github"></i>
          <span>GitHub</span>
        </a>
        <a href="https://docs.alphasystem.dev/view/if9fgsgzo3ew5b4" target="_blank" rel="noopener noreferrer" class="footer-button version-button" title="<%= hasUpdate ? 'New update available: v' + latestVersion + ' - View Changelog' : 'View Changelog' %>">
          <span>v<%= appVersion %></span>
          <% if (hasUpdate) { %>
            <span class="update-badge">
              <i class="fa-solid fa-arrow-up"></i>
            </span>
          <% } %>
        </a>
      </div>
    <% } %>
    <% if (user) { %>
      <div class="user-info">
        <div class="user-meta">
          <span class="user-name"><%= user.name %></span>
          <span class="user-role"><%= user.email %></span>
        </div>
        <a href="/logout" class="logout-link" title="Logout">
          <i class="fa-solid fa-right-from-bracket"></i>
        </a>
      </div>
    <% } %>
  </div>
</aside>